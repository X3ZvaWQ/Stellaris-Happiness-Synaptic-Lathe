namespace = action
# Other Empires react to a Pop dying in a purge
planet_event = {
	id = action.21
	hide_window = yes
	is_triggered_only = yes
	trigger = {
		exists = fromfrom		#crisis.202 can remove the last pop
		FROMFROM = {
			is_robot_pop_group = no
			is_sapient = yes
			NOT = {
				has_trait = "trait_hive_mind"
			}
			OR = {
				NOT = {
					has_citizenship_type = {
						country = from
						type = citizenship_purge
					}
				}
				NOT = {
					has_purge_type = {
						country = from
						type = purge_neutering
					}
				}
			}
			NOR = {
				has_purge_type = {
					country = from
					type = purge_necrophage
				}
				AND = {
					has_purge_type = {
						country = from
						type = purge_cosmogenesis_lathe_resettle
					}
					planet = {
						NOT = {
							has_designation = col_cosmogenesis_world
						}
					}
				}
				# 突触凝练机内，是主体物种，跳过判断
				AND = {
					planet = {
						has_designation = col_cosmogenesis_world
					}
					is_same_species = owner_species
				}
			}
		}
		is_controlled_by = FROM
	}
	immediate = {
		every_country = {
			limit = {
				has_communications = FROM
				NOT = {
					is_country = FROM
				}
				NOT = {
					is_same_species = FROMFROM
				}
				NOT = {
					has_ai_personality_behaviour = purger
				}
				OR = {
					is_country_type = default
					has_ai_personality = awakened_fallen_empire_xenophile
				}
				has_intel_level = {
					who = FROM
					category = economy
					level >= 1
				}
			}
			while = {
				count = root.local_pop_amount
				add_opinion_modifier = {
					who = FROM
					modifier = opinion_genocidal
				}
			}
		}
		every_country = {
			limit = {
				has_communications = FROM
				NOT = {
					is_country = FROM
				}
				is_same_species = FROMFROM
				has_intel_level = {
					who = FROM
					category = economy
					level >= 1
				}
			}
			while = {
				count = root.local_pop_amount
				add_opinion_modifier = {
					who = FROM
					modifier = opinion_genocidal_our_species
				}
			}
		}
	}
}
